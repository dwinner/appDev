var sideviewmenu=function(n,t){function e(n,r){t.ajax({url:n,dataType:"html",error:function(n){console.log("Error fetching content.<br />Server Response: "+n.responseText)},success:function(n){f=!0;r.menuref=t(n);i(r)}})}function i(n){function v(n){if(n==="open"){s.css({overflow:"auto"});a.css({height:s.get(0).scrollHeight});o.onopenclose("opened")}else{c.css({height:"",overflow:""});h.css("overflow","auto");s.css({overflow:""});o.onopenclose("closed")}}var l=n.menusource||u.menusource,a;if(!f&&l!=="inline"){e(l,n);return}var o=t.extend({},u,n),h=t(document.body),c=t("#contentwrapper"),s=o.menuref||t("#"+o.menuid);if(c.length===0&&(h.wrapInner('<div id="contentwrapper" />'),c=t("#contentwrapper")),h.prepend(s),a=t('<div class="backdrop" />').prependTo(s),r){c.css({transitionDuration:o.main_transition_duration+"s"});s.css({transitionDuration:o.menu_transition.duration+"s",transitionDelay:o.menu_transition.delay+"s"});s.find("."+o.list_transition.listclass+" li").each(function(n){t(this).css({transitionDuration:o.list_transition.duration+"s",transitionDelay:o.list_transition.basedelay+o.list_transition.delay*n+"s"})});h.on("transitionend webkitTransitionEnd",function(n){n.originalEvent&&/transform/i.test(n.originalEvent.propertyName)&&n.target.getAttribute("id")===o.menuid&&v(h.hasClass("opensideviewmenu")?"open":"close")})}else s.css({left:"-100%",visibility:"visible"});i.toggle=function(n){var i,t;h.css("overflow","hidden");c.css({height:window.innerHeight,overflow:"hidden"});i=n==="open"?"addClass":n==="close"?"removeClass":"toggleClass";setTimeout(function(){h[i]("opensideviewmenu")},r?25:0);r||(t=n==="open"?0:n==="close"?"-100%":h.hasClass("opensideviewmenu")?"-100%":0,s.animate({left:t},o.menu_transition.duration+"ms",function(){v(t===0?"open":"close")}))};s.add(c).on("click",function(){h.hasClass("opensideviewmenu")&&i.toggle("close")})}var u={main_transition_duration:.3,menu_transition:{duration:.4,delay:.4},list_transition:{listclass:"menulinks",duration:.5,basedelay:.4,delay:.3},menusource:"menucontents.html",menuid:"sideviewmenu",onopenclose:function(){}},r=typeof t(document.documentElement).css("perspective")!="undefined",f=!1;return i}(window,jQuery);