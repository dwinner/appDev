!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){var t=function(){function t(){var t=this,p=function(){var i=["br-wrapper"];""!==t.options.theme&&i.push("br-theme-"+t.options.theme);t.$elem.wrap(n("<div />",{"class":i.join(" ")}))},w=function(){t.$elem.unwrap()},s=function(i){return n.isNumeric(i)&&(i=Math.floor(i)),n('option[value="'+i+'"]',t.$elem)},b=function(){var i=t.options.initialRating;return i?s(i):n("option:selected",t.$elem)},i=function(n){var i=t.$elem.data("barrating");return"undefined"!=typeof n?i[n]:i},r=function(n,i){null!==i&&"object"==typeof i?t.$elem.data("barrating",i):t.$elem.data("barrating")[n]=i},k=function(){var n=b(),i=n.val(),u=n.data("html")?n.data("html"):n.text();r(null,{userOptions:t.options,ratingValue:i,ratingText:u,originalRatingValue:i,originalRatingText:u,readOnly:t.options.readonly,ratingMade:!1})},d=function(){t.$elem.removeData("barrating")},f=function(){return i("ratingText")},u=function(){return i("ratingValue")},g=function(){var i=n("<div />",{"class":"br-widget"});return t.$elem.find("option").each(function(){var u,r,f,e;u=n(this).val();u&&(r=n(this).text(),f=n(this).data("html"),f&&(r=f),e=n("<a />",{href:"#","data-rating-value":u,"data-rating-text":r,html:t.options.showValues?r:""}),i.append(e))}),t.options.showSelectedRating&&i.append(n("<div />",{text:"","class":"br-current-rating"})),t.options.reverse&&i.addClass("br-reverse"),t.options.readonly&&i.addClass("br-readonly"),i},h=function(){return i("userOptions").reverse?"nextAll":"prevAll"},c=function(n){s(n).prop("selected",!0);t.$elem.change()},nt=function(){n("option",t.$elem).prop("selected",function(){return this.defaultSelected});t.$elem.change()},e=function(n){n=n?n:f();t.options.showSelectedRating&&t.$elem.parent().find(".br-current-rating").text(n)},tt=function(n){return Math.round(Math.floor(10*n)/10%1*100)},l=function(){t.$widget.find("a").removeClass()},o=function(){var o,r,f=t.$widget.find('a[data-rating-value="'+u()+'"]'),e=i("userOptions").initialRating,c=n.isNumeric(u())?u():0,s=tt(e);if(l(),f.addClass("br-selected br-current")[h()]().addClass("br-selected"),!i("ratingMade")&&n.isNumeric(e)){if(c>=e||!s)return;o=t.$widget.find("a");r=f.length?f[i("userOptions").reverse?"prev":"next"]():o[i("userOptions").reverse?"last":"first"]();r.addClass("br-fractional");r.addClass("br-fractional-"+s)}},it=function(n){return t.options.deselectable?t.$elem.find("option:first").val()?!1:u()==n.attr("data-rating-value"):!1},rt=function(s){s.on("click.barrating",function(s){var h,l,a=n(this),v=i("userOptions");return s.preventDefault(),h=a.attr("data-rating-value"),l=a.attr("data-rating-text"),it(a)&&(h="",l=""),r("ratingValue",h),r("ratingText",l),r("ratingMade",!0),c(h),e(l),o(),v.onSelect.call(t,u(),f(),s),!1})},ut=function(t){t.on("mouseenter.barrating",function(){var t=n(this);l();t.addClass("br-active")[h()]().addClass("br-active");e(t.attr("data-rating-text"))})},ft=function(){t.$widget.on("mouseleave.barrating blur.barrating",function(){e();o()})},a=function(t){t.on("touchstart.barrating",function(t){t.preventDefault();t.stopPropagation();n(this).click()})},et=function(n){n.on("click.barrating",function(n){n.preventDefault()})},ot=function(n){rt(n);t.options.hoverState&&(ut(n),ft(n))},v=function(n){n.off(".barrating")},y=function(n){$elements=t.$widget.find("a");a&&a($elements);n?(v($elements),et($elements)):ot($elements)};this.show=function(){i()||(p(),k(),t.$widget=g(),t.$widget.insertAfter(t.$elem),o(),e(),y(t.options.readonly),t.$elem.hide())};this.readonly=function(n){"boolean"==typeof n&&i("readOnly")!=n&&(y(n),r("readOnly",n),t.$widget.toggleClass("br-readonly"))};this.set=function(n){var s=i("userOptions");t.$elem.find('option[value="'+n+'"]').val()&&(r("ratingValue",n),r("ratingText",t.$elem.find('option[value="'+n+'"]').text()),r("ratingMade",!0),c(u()),e(f()),o(),s.silent||s.onSelect.call(this,u(),f()))};this.clear=function(){var n=i("userOptions");r("ratingValue",i("originalRatingValue"));r("ratingText",i("originalRatingText"));r("ratingMade",!1);nt();e(f());o();n.onClear.call(this,u(),f())};this.destroy=function(){var n=u(),r=f(),e=i("userOptions");v(t.$widget.find("a"));t.$widget.remove();d();w();t.$elem.show();e.onDestroy.call(this,n,r)}}return t.prototype.init=function(t,i){return this.$elem=n(i),this.options=n.extend({},n.fn.barrating.defaults,t),this.options},t}();n.fn.barrating=function(i,r){return this.each(function(){var u=new t;if(n(this).is("select")||n.error("Sorry, this plugin only works with select fields."),u.hasOwnProperty(i)){if(u.init(r,this),"show"===i)return u.show(r);if(u.$elem.data("barrating"))return u.$widget=n(this).next(".br-widget"),u[i](r)}else{if("object"==typeof i||!i)return r=i,u.init(r,this),u.show();n.error("Method "+i+" does not exist on jQuery.barrating")}})};n.fn.barrating.defaults={theme:"",initialRating:null,showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,onSelect:function(){},onClear:function(){},onDestroy:function(){}};n.fn.barrating.BarRating=t});
//# sourceMappingURL=jquery.barrating.min.js.map
